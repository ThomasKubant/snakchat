<section class="postCreation">
  
  <form class="new-post-form">
    <h2>Create New Post</h2>
    <div>
      <label for="post-title">Title</label>
      <input type="text" id="post-title" name="post-title" />
    </div>
    <div>
      <label for="post-url">Link</label>
      <input id="post-url" name="post-url" />
    </div>
    <div>
      <label for="post-description">Description</label>
      <input type="text" id="post-description" name="post-description"/>
    </div>
    <div>
      <label for="category">Snack type</label>
      <select name="category" id="category">
        <option value="candy">Candy</option>
        <option value="chips">Chips</option>
        <option value="iceCream">Ice Cream</option>
        <option value="cereal">Cereal</option>
      </select>
    </div>

    
    <button type="submit" class="btn" id="submitBtn">Create</button>
  </form>
  <div>
      <button id="upload_widget" class="cloudinary-button">Upload Image</button>

<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  

<script type="text/javascript">  
var myWidget = cloudinary.createUploadWidget({
  cloudName: 'dnq8lv71z', 
  uploadPreset: 'snakchat'}, (error, result) => { 
    if (!error && result && result.event === "success") { 
      console.log('Done! Here is the image info: ', result.info); 
      if(result.info.url) {
        localStorage.setItem("imageURL", result.info.url);
        console.log(result.info.url);
      }
      
    }
    
  }
)

document.getElementById("upload_widget").addEventListener("click", function(){
    myWidget.open();
  }, false);
</script>
</div>
</section>

{{#if posts.length}}
<section>
  <h2>Your Posts</h2>
  <ul>
    {{#each posts as |post|}}
    <li>
      {{> post-info post}}
      <a href="/dashboard/edit/{{post.id}}" class="edit-link">Edit post</a>
    </li>
    {{/each}}
  </ul>
</section>
{{/if}}

<script src="/javascript/require.js"></script>
<script src="/javascript/add-post.js"></script>
<script src="/javascript/upload-image.js"></script>